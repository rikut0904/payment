<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body data-skip-auth-redirect="true">
  <div class="layout">
    <%- include('../partials/header', { title }) %>
      <div class="content">
        <section class="card">
          <h2>おすすめの詳細</h2>
          <div class="detail-grid">
            <div class="detail-column">
            <p><strong>おすすめ登録日:</strong>
              <%= entry.createdAt || '未入力' %>
            </p>
            </div>
            <div class="detail-column">
              <p><strong>ユーザー名:</strong>
                <%= entry.userName || '' %>
              </p>
              <p><strong>カテゴリ:</strong>
                <%= entry.category || '未分類' %>
              </p>
              <p><strong>商品名:</strong>
                <%= entry.title || '' %>
              </p>
              <p><strong>商品概要:</strong>
                <%= entry.content || '未入力' %>
              </p>
              <p><strong>購入日:</strong>
                <%= entry.date || '未入力' %>
              </p>
              <p><strong>購入先URL:</strong>
                <% if (entry.url) { %>
                  <a href="<%= entry.url %>" target="_blank" rel="noopener noreferrer">
                    <%= entry.url %>
                  </a>
                  <% } else { %>
                    未入力
                    <% } %>
              </p>
            </div>
            <div class="detail-column">
              <p><strong>商品画像:</strong></p>
              <% if (entry.image) { %>
                <img src="/image-proxy?url=<%= encodeURIComponent(entry.image) %>" alt="商品画像" class="img-detail">
                <% } else { %>
                  未入力
                  <% } %>
            </div>
          </div>
          <% const safeListPath = redirectPath || '/like'; %>
          <div class="actions">
            <a href="<%= safeListPath %>" class="btn">一覧へ戻る</a>
            <a href="/like/update/<%= entry.id %>?redirect=<%= encodeURIComponent(safeListPath) %>&returnToDetail=1" class="btn edit-link">編集する</a>
          </div>
        </section>
      </div>
      <footer>
        <p>&copy; 2025 <%= projectName %>. All rights reserved.</p>
      </footer>
  </div>
  <script id="firebase-config" type="application/json"><%- JSON.stringify(firebaseConfig || {}) %></script>
  <script type="module" src="/javascripts/firebase-auth.js" defer></script>
  <script src="/javascripts/like-actions.js" defer></script>
</body>

</html>
