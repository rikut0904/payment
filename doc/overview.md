# システム概要

## 目的
支払いカード・サブスクリプション・おすすめ(Like)を管理し、
月次の支払状況や推移をダッシュボードで可視化します。

## 主要コンポーネント
- Webアプリ: Express + EJS
- 認証: Firebase Authentication
- データベース: Firestore（Admin SDK）
- 外部API: 為替レート取得（`lib/exchangeRates.js`）

## 処理フロー（概要）
1. クライアントでFirebase認証（ログイン/サインアップ）
2. 取得したIDトークンを `/session` に送信
3. サーバーがトークン検証し、署名付きセッションクッキーを発行
4. 以降のルートはセッションを基に認可

## ダッシュボード集計
- 今月の支払合計/支払予定を集計
- 過去5か月の支払推移を棒グラフで表示
- 通貨換算は為替レートAPIを利用し、JPYに換算

## 外部APIとタイムアウト
- 外部APIは `lib/httpClient.js` を通じてタイムアウトを設定
- タイムアウト時はエラーとして扱い、UI側で安全に表示

